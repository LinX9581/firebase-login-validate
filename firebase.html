<script src="https://www.gstatic.com/firebasejs/5.5.9/firebase.js"></script>

<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyAN29JToq7jGGiol4xRHWPk0lAB_U_kGPY",
        authDomain: "artificial-intelligence-8da03.firebaseapp.com",
        databaseURL: "https://artificial-intelligence-8da03.firebaseio.com",
        projectId: "artificial-intelligence-8da03",
        storageBucket: "artificial-intelligence-8da03.appspot.com",
        messagingSenderId: "1095359509219"
    };

    firebase.initializeApp(config);

    $(document).ready(function() {
        var root = firebase.database().ref();

        $("#insert").click(function() {

            var Name = $("#name").val();
            var mail = $("#mail").val();
            var phone = $("#phone").val();

            var msgRef = root.child(Name);
            var personData = {

            }
            msgRef.push({
                name: Name,
                mail: mail,
                phone: phone
            })
            console.log(personData)
                //msgShow = `<li>${personData}</li>`
                //$("#query").html(msgShow);


            msgRef.on("value", function(snap) {
                console.log(snap.val())
                var alldata = snap.val();
                var list = '';
                $.each(alldata, function(i, item) {
                    list = `${list}<li>${item.name}</li>`
                    console.log('each', i, item);
                    console.log(item.name)
                })

                $("#data").html(list);
            })

            $("#name").val('');
            $("#mail").val('');
            $("#phone").val('');
        })
        var title = 'name';

        var Name = $("#name").val();

        var root = firebase.database().ref();

        $("#input-search").click(function() {
            var search = $("#type-search").val()
            var searchRef = root.child(search);
            searchRef.on("value", function(snap) {
                var val1 = snap.val();
                var list = ''
                $.each(val1, function(i, item) {
                    list = `${list}<li>${item.name}</li>`
                })
                $("#query").html(list)
            })
        })
    })
</script>